<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Simulator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #121212; /* Darker background for a modern look */
            color: #fff;
            margin: 0;
            display: flex;
            transition: margin-left 0.3s; /* Smooth transition for content */
        }
        .sidebar {
            width: 250px; /* Wider sidebar */
            background-color: #1a1a1a;
            padding: 20px;
            transition: transform 0.3s ease;
            position: fixed;
            height: 100%;
            left: -250px; /* Hidden by default */
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
        }
        .sidebar.active {
            transform: translateX(250px); /* Slide in */
        }
        .sidebar h2 {
            color: #ff0000;
            font-size: 28px; /* Larger header */
            margin: 0 0 20px;
            text-align: center; /* Centered title */
        }
        .sidebar button {
            background-color: #2c2c2c;
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 15px; /* More space between buttons */
            font-size: 16px; /* Larger button text */
            transition: background-color 0.3s; /* Smooth hover transition */
        }
        .sidebar button:hover {
            background-color: #ff0000;
        }
        .content {
            margin-left: 250px; /* Space for sidebar */
            padding: 20px;
            flex-grow: 1;
            transition: margin-left 0.3s; /* Smooth transition for content */
        }
        h2 {
            color: #ff0000;
            font-size: 28px; /* Larger section titles */
            border-bottom: 2px solid #ff0000; /* Underline effect */
            padding-bottom: 10px; /* Space under title */
        }
        .section {
            background-color: #1a1a1a;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.5); /* Shadow for depth */
        }
        .empty-message {
            color: #b3b3b3;
            font-size: 18px;
            text-align: center;
            margin-top: 20px; /* Space above message */
        }
        .btn {
            display: block;
            width: 100%;
            background-color: #ff0000;
            color: white;
            padding: 12px;
            border: none;
            border-radius: 5px;
            text-align: center;
            font-size: 16px;
            margin-top: 10px;
            cursor: pointer;
            transition: background-color 0.3s; /* Smooth hover transition */
        }
        .btn:hover {
            background-color: #cc0000;
        }
        #toggleSidebar {
            background-color: #2c2c2c;
            color: white;
            border: none;
            padding: 12px;
            cursor: pointer;
            border-radius: 5px;
            position: absolute;
            top: 20px;
            left: 20px;
            transition: background-color 0.3s; /* Smooth hover transition */
        }
        #toggleSidebar:hover {
            background-color: #ff0000;
        }
        .form-group {
            margin-bottom: 15px; /* Space between form fields */
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
        }
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #2c2c2c;
            color: white;
        }
        .negotiation-request {
            background-color: #2c2c2c;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .countdown {
            color: #ffcc00; /* Yellow for countdown */
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="sidebar" id="sidebar">
        <h2>Business Simulator</h2>
        <button onclick="showSection('investing')">Investing</button>
        <button onclick="showSection('production')">Production</button>
        <button onclick="showSection('offers')">Country Offers</button>
    </div>

    <div class="content">
        <button id="toggleSidebar" onclick="toggleSidebar()">☰</button>
        
        <div id="investing" class="section">
            <h2>Investing</h2>
            <p class="empty-message">This section is under development. Please check back later.</p>
        </div>

        <div id="production" class="section" style="display:none;">
            <h2>Production</h2>
            <div class="form-group">
                <label for="unitName">Unit Name</label>
                <input type="text" id="unitName" placeholder="Enter unit name" />
            </div>
            <div class="form-group">
                <label for="unitCost">Cost</label>
                <input type="number" id="unitCost" placeholder="Enter cost" />
            </div>
            <div class="form-group">
                <label for="unitQuantity">Quantity Available</label>
                <input type="number" id="unitQuantity" placeholder="Enter quantity" />
            </div>
            <button class="btn" onclick="createUnit()">Create Unit</button>
            
            <h3>Negotiation Requests</h3>
            <div id="requestsContainer"></div>

            <h3>Payment Complete and Ready to be Delivered</h3>
            <div id="deliveryContainer"></div>
        </div>

        <div id="offers" class="section" style="display:none;">
            <h2>Country Offers</h2>
            <p class="empty-message">This section is under development. Please check back later.</p>
        </div>
    </div>

    <script>
        let deliveryTimer;
        let deliveryRequests = [];
        let deliveryCount = 0;

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const content = document.querySelector('.content');
            sidebar.classList.toggle('active');

            // Adjust the content margin based on sidebar state
            if (sidebar.classList.contains('active')) {
                content.style.marginLeft = '250px'; // Space for expanded sidebar
            } else {
                content.style.marginLeft = '0'; // No space when hidden
            }
        }

        function showSection(section) {
            document.querySelectorAll('.section').forEach(sec => {
                sec.style.display = 'none'; // Hide all sections
            });
            document.getElementById(section).style.display = 'block'; // Show the selected section
        }

        function createUnit() {
            const unitName = document.getElementById('unitName').value;
            const unitCost = document.getElementById('unitCost').value;
            const unitQuantity = document.getElementById('unitQuantity').value;

            if (unitName && unitCost && unitQuantity) {
                const request = {
                    country: "Russia", // This can be random or based on selection
                    unitName,
                    unitCost,
                    unitQuantity,
                };

                deliveryRequests.push(request);
                displayRequests();

                // Clear input fields
                document.getElementById('unitName').value = '';
                document.getElementById('unitCost').value = '';
                document.getElementById('unitQuantity').value = '';

                // Start timer for delivery
                startDeliveryTimer();
            } else {
                alert("Please fill all fields to create a unit.");
            }
        }

        function displayRequests() {
            const requestsContainer = document.getElementById('requestsContainer');
            requestsContainer.innerHTML = '';

            deliveryRequests.forEach((request, index) => {
                const requestDiv = document.createElement('div');
                requestDiv.className = 'negotiation-request';
                requestDiv.innerHTML = `
                    <strong>${request.country}</strong> wants to buy ${request.unitQuantity} units of <em>${request.unitName}</em> at $${request.unitCost} each.
                    <button onclick="acceptRequest(${index})">Accept</button>
                    <button onclick="negotiateRequest(${index})
                    Continuing from where we left off, we’ll complete the negotiation and acceptance process for the requests, along with the countdown timer for delivery. Here’s the complete JavaScript and HTML code needed to implement these features:

### Continued JavaScript Functionality

```html
                    <button onclick="negotiateRequest(${index})">Negotiate</button>
                `;
                requestsContainer.appendChild(requestDiv);
            });
        }

        function acceptRequest(index) {
            const request = deliveryRequests[index];
            deliveryCount++;

            const deliveryContainer = document.getElementById('deliveryContainer');
            const deliveryDiv = document.createElement('div');
            deliveryDiv.id = `delivery-${deliveryCount}`;
            deliveryDiv.innerHTML = `
                <strong>Payment Complete:</strong> ${request.country} has paid for ${request.unitQuantity} units of <em>${request.unitName}</em> at $${request.unitCost} each.
                <span class="countdown" id="countdown-${deliveryCount}">1:00</span>
                <button onclick="sendDelivery(${deliveryCount})">Send Delivery</button>
            `;
            deliveryContainer.appendChild(deliveryDiv);
            
            // Remove the request after accepting
            deliveryRequests.splice(index, 1);
            displayRequests();

            // Start countdown timer for delivery
            startCountdown(deliveryCount);
        }

        function negotiateRequest(index) {
            const request = deliveryRequests[index];
            const newCost = prompt(`Negotiate price for ${request.unitName}. Current price: $${request.unitCost}`, request.unitCost);
            if (newCost !== null && !isNaN(newCost) && newCost > 0) {
                request.unitCost = newCost;
                displayRequests();
            } else {
                alert("Invalid price entered. Negotiation failed.");
            }
        }

        function startCountdown(deliveryId) {
            let timeLeft = 60; // 1 minute countdown
            const countdownElement = document.getElementById(`countdown-${deliveryId}`);

            deliveryTimer = setInterval(() => {
                timeLeft--;
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                countdownElement.textContent = `${minutes}:${seconds < 10 ? '0' + seconds : seconds}`;

                if (timeLeft <= 0) {
                    clearInterval(deliveryTimer);
                    alert(`Delivery to ${deliveryId} is ready to be sent!`);
                }
            }, 1000);
        }

        function sendDelivery(deliveryId) {
            const deliveryDiv = document.getElementById(`delivery-${deliveryId}`);
            deliveryDiv.innerHTML += ` <strong>Delivery sent!</strong>`;
            // Optionally remove the delivery div after some time or keep it in a log
            setTimeout(() => {
                deliveryDiv.remove(); // Remove delivery info after sending
            }, 5000); // Keep the message for 5 seconds
        }
    </script>
</body>
</html>
